# -*- mode: Snakemake -*-
# Sequence Consolidating Rules

rule consolidate:
  input:
    RUN_DIR + "/processData/{sample}.{read}.trim.fastq.gz"
  output:
    consol=temp(RUN_DIR + "/processData/{sample}.{read}.consol.fasta"),
    key=temp(RUN_DIR + "/processData/{sample}.{read}.key.csv")
  log:
    RUN_DIR + "/logs/{sample}.{read}.consol.log"
  shell:
    """
    TOOL="{ROOT_DIR}/tools/seqConsolidateR/seqConsolidate.R"
    Rscript ${{TOOL}} {input} -o {output.consol} -k {output.key} > {log} 2>&1
    """

